{% extends "base.html" %}
{% load static %}

{% block page_header %}
{% endblock %}

{% block content %}
    <div class="container container-home h-100">
        <div class="row h-100 d-flex justify-content-center {% if reviews|length < 1 %}space-home{% endif %}">
            <div class="col-12 col-md-8 my-auto pt-2 text-center gamerStyle">
                <h1>Snacks so good you'll keep coming back..</h1>
                <p class="altFont my-0">Create an account to start adding snacks!</p>
                <div class="my-2">
                    <a href="{% url 'supplies' %}" class="btn btn-lg text-uppercase">Snack Now</a>
                </div>
                {% if reviews %}
                    <h2 class="highlight mt-4">Why believe us?</h2>
                    <p class="altFont my-0">Read some of our reviews below</p>
                    <!-- Credit for adapted Bootstrap 5 carousel: https://getbootstrap.com/docs/5.0/components/carousel/ -->
                    <div id="review-carousel" class="carousel slide" data-bs-ride="carousel" data-bs-interval="false">
                        <div class="carousel-inner">
                            {% for review in reviews %}
                            <!-- Credit for inner carousel for loop -->
                            <div class="carousel-item h-100 p-4 {% if forloop.counter == 1 %}active{% endif %}">
                                <p class="altFont">{{ review.rating }}/5</p>
                                <p class="altFont">{{ review.review }}</p>
                                <p class="altFont"><span class="highlight">Added By:</span> {{ review.added_by|title }}</p>
                            </div>
                            {% endfor %}
                        </div>
                        <button class="carousel-control-prev my-auto" type="button" data-bs-target="#review-carousel" data-bs-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Previous</span>
                        </button>
                        <button class="carousel-control-next my-auto" type="button" data-bs-target="#review-carousel" data-bs-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Next</span>
                        </button>
                    </div>
                    <div class="row">

                        {% if request.user.is_authenticated %}
                        <div class="col-{% if request.user.is_superuser %}6 text-start{% else %}12{% endif %}">
                            <a href="{% url 'review_add' %}" class="btn btn-sm my-2">Add Review</a>
                        </div>
                        {% endif %}
                        {% endif %}
                        {% if request.user.is_superuser %}
                        <div class="col-6 text-end">
                            <a href="{% url 'reviews_manage' %}" class="btn btn-sm my-2">Manage reviews</a>
                        </div>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
{% endblock %}